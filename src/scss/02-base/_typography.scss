/* ==========================================================================
   SECTION TYPOGRAPHY
========================================================================== */

@use '@mattmcadams/stratus';
@use '../01-core' as *;
@use '../01-core/token';

@if $adjust-central-type {
/** SECTION Resets
 * These styles override aggressive styles from central style.css
-------------------------------------------------------------------------- */
  :root {
    font-size: 16px;
    color: token.color('text', 'body');
  }
  /* Restore inheritance to inline elements */
  #{$specify} h1 a,
  #{$specify} h1 strong,
  #{$specify} h1 b,
  #{$specify} h1 span,
  #{$specify} h2 a,
  #{$specify} h2 strong,
  #{$specify} h2 b,
  #{$specify} h2 span,
  #{$specify} h3 a,
  #{$specify} h3 strong,
  #{$specify} h3 b,
  #{$specify} h3 span,
  #{$specify} h4 a,
  #{$specify} h4 strong,
  #{$specify} h4 b,
  #{$specify} h4 span,
  #{$specify} #footer a,
  #{$specify} #footer span,
  #{$specify} b,
  #{$specify} span,
  #{$specify} strong,
  #{$specify} em {
    @include reset(color, font-size);
    font-family: inherit;
  }

  /* Restore font weight inheritance to certain inline elements */
  #{$specify} .categories-list h3 a,
  #{$specify} span,
  #{$specify} #rightsidebar h4 .mod-articles-category-title {
    font-weight: inherit;
  }

  /* Correct header font on h5 elements
   * !important used to override aggressive styles from central css
  **/
  #{$specify} h5 {
    font-family: token.font('head') !important;
  }

  /* remove spacing and border from the generated header from the article title */
  #{$specify} .page-header {
    @include reset(margin, padding, border);
  }
/* End !SECTION Resets */
}

/** SECTION Header Spacing
 * Create a consistent style for headers and their spacing
-------------------------------------------------------------------------- */

#{$specify} h1,
#{$specify} .uk-h1,
#{$specify} h2,
#{$specify} .uk-h2,
#{$specify} h3,
#{$specify} .uk-h3,
#{$specify} h4,
#{$specify} .uk-h4,
#{$specify} h5,
#{$specify} .uk-h5,
#{$specify} h6,
#{$specify} .uk-h6 {
  @if $adjust-central-type { @include reset(margin, color); }
  @extend %header;
}

/* Gives added top margin to headers */
//OPTIMIZE: specificity
#{$specify} #{$specify-main} {
  h1,
  h2,
  h3,
  h4 {
    margin-top: token.space(2);
  }
}
#{$specify} #{$specify-main} {
  h4,
  h5,
  h6 {
    margin-bottom: token.space(0.5);
  }
}

/* Reduce top margin when directly following previous header */
#{$specify} #{$specify-main} h1 + h2,
#{$specify} #{$specify-main} h2 + h3,
#{$specify} #{$specify-main} h3 + h4 {
  margin-top: token.space(1);
}

#{$specify} h5,
#{$specify} h6 {
  font-weight: token.font('head', 'bold');
}

/* End !SECTION Header Spacing */
/** SECTION Font Sizes
 * Use modular scale for font sizes and line heights
 * [1] ID is used here to overwrite equally high specificity from style.css
-------------------------------------------------------------------------- */
#{$specify} h1,
#{$specify} .uk-h1 { @include stratus.type-set(huge); }
#{$specify} h2,
#{$specify} .uk-h2 { @include stratus.type-set(xlarge); }
/*[1]*/
#{$specify} h3,
#leftcolumn h3,
#{$specify} .uk-h3 { @include stratus.type-set(large); }
#{$specify} h4,
#{$specify} .uk-h4 { @include stratus.type-set(medium); }
#{$specify} h5,
#{$specify} .uk-h5,
#{$specify} h6,
#{$specify} .uk-h6,
body,
#{$specify} p,
#{$specify} .uk-p { @include stratus.type-set(normal); }
#{$specify} small,
#{$specify} .uk-small { @include stratus.type-set(small); }

/* End !SECTION Font Sizes */
/** SECTION Copy
 * Styles for block level typographical elements
-------------------------------------------------------------------------- */

#{$specify} p,
#{$specify} hr,
#{$specify} pre {
  margin-top: 0;
  @include block-margin;
}
#{$specify} p + p {
  margin-top: token.space(-0.5);
}

#{$specify} pre {
  white-space: pre-wrap;
}

#{$specify} pre > code {
  display: block;
  padding: token.space('padding', 'block');
  white-space: inherit;
}

/* End !SECTION Copy */
/** SECTION Rule Lines
 * Style for the <hr> element
 * [1] Ensure hr takes up no vertical space, but is still visible
 * [2] Allow rule lines that immediately follow headers to sit on the
 * header's baseline
-------------------------------------------------------------------------- */

#{$specify} hr {
  box-sizing: content-box; /*[1]*/
  height: 0; /*[1]*/
  overflow: visible; /*[1]*/
  border-style: solid;
  border-width: 0 0 token.border('width', 'hairline');
  border-color: token.border('color', 'accent');
}

#{$specify} h1 + hr,
#{$specify} h2 + hr,
#{$specify} h3 + hr,
#{$specify} h4 + hr,
#{$specify} h5 + hr,
#{$specify} h6 + hr {
  margin-top: token.space(-0.5); /*[2]*/
}

/* End !SECTION Rule Lines */
/** SECTION Links
-------------------------------------------------------------------------- */
/* WARNING: Do not change the specificity of the link selectors.
 * Any higher and they cause problems with buttons, cards, etc.
 * Any lower and they fail to override central css
**/

/* Remove existing link styles */
body.linear a {
  @include reset(color, font-weight, transition);
  text-decoration: none;
}


/**
 * [1] Applies link styles to content areas only. Less specific than an id and
 * helps avoid overreaching styles.
 * [2] Add basic styles for the icon added to links that open in new
 * tabs or lead to a pdf document.
 * [3] Add new tab icon
 * [4] Add pdf icon
**/
// TODO: Reduce specificity as much as possible
/*[1]*/
body.linear [role='banner'],
body.linear [role='main'],
body.linear [id='footer'],
body.linear [id='lockedFooter'] {
  a {
    @extend %link-primary;
  }

  a:not(.btn)[target='_blank']::after,
  a:not(.btn)[href$='.pdf']::after {
    font-family: token.font('icon');/*[2]*/
    margin-left: 0.5em;
    font-weight: normal;
    font-size: 75%;
  }

  a:not(.btn)[target='_blank']::after { content: '#{token.icon('new-tab')}'; /*[3]*/ }
  a:not(.btn)[href$='.pdf']::after { content: '#{token.icon('pdf')}'; /*[4]*/ }
}

/* End !SECTION Links */
/** SECTION Semantic HTML
-------------------------------------------------------------------------- */

#{$specify} abbr {
  text-decoration: none;
}

/* Add padding to inline elements with background */
#{$specify} mark,
#{$specify} code,
#{$specify} kbd {
  padding: token.space('padding', 'inline');
}
#{$specify} code,
#{$specify} kbd {
  white-space: pre;
  border-radius: token.border('radius');
  font-family: token.font('mono');
}

#{$specify} mark {
  background-color: token.color('accent', '100');
}

#{$specify} code {
  background-color: token.color('background');
  color: token.color('neutral', '700' );
}
#{$specify} kbd {
  background-color: token.color('neutral', '800' );
  color: white;
}

/* End !SECTION SEMANTIC HTML */
/* End !SECTION TYPOGRAPHY */
